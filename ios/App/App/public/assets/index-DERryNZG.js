import{d as R,b as T,f as x,h as k,e as S,g as F,c as A,Y as N,Q as O,R as q,n as B,u as $,P as H,y as M,z as W,A as D,_ as V,i as j,w as c,r as d,o as z,j as r,k as h,l as v}from"./index-BVa5phYe.js";import{W as Q,a as w,r as Y}from"./index-Cwenx0lJ.js";var p;(function(l){l.Prompt="PROMPT",l.Camera="CAMERA",l.Photos="PHOTOS"})(p||(p={}));var f;(function(l){l.Rear="REAR",l.Front="FRONT"})(f||(f={}));var P;(function(l){l.Uri="uri",l.Base64="base64",l.DataUrl="dataUrl"})(P||(P={}));class E extends Q{async getPhoto(e){return new Promise(async(n,a)=>{if(e.webUseInput||e.source===p.Photos)this.fileInputExperience(e,n,a);else if(e.source===p.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",async o=>{o.detail===0?this.fileInputExperience(e,n,a):this.cameraExperience(e,n,a)})}else this.cameraExperience(e,n,a)})}async pickImages(e){return new Promise(async(n,a)=>{this.multipleFileInputExperience(n,a)})}async cameraExperience(e,n,a){if(customElements.get("pwa-camera-modal")){const t=document.createElement("pwa-camera-modal");t.facingMode=e.direction===f.Front?"user":"environment",document.body.appendChild(t);try{await t.componentOnReady(),t.addEventListener("onPhoto",async o=>{const i=o.detail;i===null?a(new w("User cancelled photos app")):i instanceof Error?a(i):n(await this._getCameraPhoto(i,e)),t.dismiss(),document.body.removeChild(t)}),t.present()}catch(o){this.fileInputExperience(e,n,a)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,n,a)}fileInputExperience(e,n,a){let t=document.querySelector("#_capacitor-camera-input");const o=()=>{var i;(i=t.parentNode)===null||i===void 0||i.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",i=>{const s=t.files[0];let u="jpeg";if(s.type==="image/png"?u="png":s.type==="image/gif"&&(u="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){const m=new FileReader;m.addEventListener("load",()=>{if(e.resultType==="dataUrl")n({dataUrl:m.result,format:u});else if(e.resultType==="base64"){const b=m.result.split(",")[1];n({base64String:b,format:u})}o()}),m.readAsDataURL(s)}else n({webPath:URL.createObjectURL(s),format:u}),o()}),t.addEventListener("cancel",i=>{a(new w("User cancelled photos app")),o()})),t.accept="image/*",t.capture=!0,e.source===p.Photos||e.source===p.Prompt?t.removeAttribute("capture"):e.direction===f.Front?t.capture="user":e.direction===f.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(e,n){let a=document.querySelector("#_capacitor-camera-input-multiple");const t=()=>{var o;(o=a.parentNode)===null||o===void 0||o.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input-multiple",a.type="file",a.hidden=!0,a.multiple=!0,document.body.appendChild(a),a.addEventListener("change",o=>{const i=[];for(let s=0;s<a.files.length;s++){const u=a.files[s];let m="jpeg";u.type==="image/png"?m="png":u.type==="image/gif"&&(m="gif"),i.push({webPath:URL.createObjectURL(u),format:m})}e({photos:i}),t()}),a.addEventListener("cancel",o=>{n(new w("User cancelled photos app")),t()})),a.accept="image/*",a.click()}_getCameraPhoto(e,n){return new Promise((a,t)=>{const o=new FileReader,i=e.type.split("/")[1];n.resultType==="uri"?a({webPath:URL.createObjectURL(e),format:i,saved:!1}):(o.readAsDataURL(e),o.onloadend=()=>{const s=o.result;n.resultType==="dataUrl"?a({dataUrl:s,format:i,saved:!1}):a({base64String:s.split(",")[1],format:i,saved:!1})},o.onerror=s=>{t(s)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new E;const G=Y("Camera",{web:()=>new E}),J=R({name:"cameraScreen",components:{IonToolbar:T,IonPage:x,IonFooter:k,IonHeader:S,IonContent:F,IonTitle:A,IonRouterOutlet:N,IonTabBar:O,IonTabButton:q,IonIcon:B,IonLabel:$,IonTabs:H},data(){},methods:{async takePhoto(){(await G.getPhoto({quality:90,allowEditing:!0,resultType:P.Uri})).webPath}},setup(){return{home:M,accessibility:W,square:D}}}),K={class:"p-3"};function X(l,e,n,a,t,o){const i=d("ion-title"),s=d("ion-toolbar"),u=d("ion-header"),m=d("ion-content"),b=d("ion-router-outlet"),_=d("ion-icon"),g=d("ion-label"),y=d("ion-tab-button"),L=d("ion-tab-bar"),I=d("ion-tabs"),U=d("ion-footer"),C=d("ion-page");return z(),j(C,null,{default:c(()=>[r(u,null,{default:c(()=>[r(s,{color:"primary"},{default:c(()=>[r(i,null,{default:c(()=>e[1]||(e[1]=[h(" Camera ")])),_:1})]),_:1})]),_:1}),r(m,null,{default:c(()=>[v("div",K,[v("button",{class:"btn btn-secondary btn-lg w-100",onClick:e[0]||(e[0]=Z=>l.takePhoto())}," Take Photo ")])]),_:1}),r(U,null,{default:c(()=>[r(s,null,{default:c(()=>[r(I,null,{default:c(()=>[r(b),r(L,{slot:"bottom"},{default:c(()=>[r(y,{tab:"home",href:"/home"},{default:c(()=>[r(_,{"aria-hidden":"true",icon:l.home},null,8,["icon"]),r(g,null,{default:c(()=>e[2]||(e[2]=[h("Home")])),_:1})]),_:1}),r(y,{tab:"Login",href:"/Login"},{default:c(()=>[r(_,{"aria-hidden":"true",icon:l.accessibility},null,8,["icon"]),r(g,null,{default:c(()=>e[3]||(e[3]=[h("Log-in Screen")])),_:1})]),_:1}),r(y,{tab:"Profile",href:"/Profile"},{default:c(()=>[r(_,{"aria-hidden":"false",icon:l.square},null,8,["icon"]),r(g,null,{default:c(()=>e[4]||(e[4]=[h("Profile Screen")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ae=V(J,[["render",X]]);export{ae as default};
